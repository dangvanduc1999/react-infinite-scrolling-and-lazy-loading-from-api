{"version":3,"sources":["assets/images/vietname.jpg","ArticlesPage.js","useArticlesQuery.js","constants.js","App.js","reportWebVitals.js","index.js"],"names":["RenderArticle","props","article","isScrollVertical","xs","sm","md","lg","className","src","VietnamPicture","alt","href","target","ArticlesPage","useState","query","setQuery","pageNumber","setPageNumber","setIsScrollVertical","loading","setLoading","error","setError","articles","setArticles","hasMore","setHasMore","useEffect","cancel","url","axios","method","cancelToken","CancelToken","c","then","res","prevArticles","Set","data","maxPerPage","catch","e","isCancel","useArticlesQuery","observer","useRef","lastArticlesElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","console","log","checkedChildren","unCheckedChildren","checked","onChange","Search","value","event","allowClear","style","width","placeholder","map","index","length","ref","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0TAAe,G,YAAA,IAA0B,sC,OCOnCA,EAAgB,SAACC,GAAW,IAAD,EAEzBC,EAEAD,EAFAC,QACAC,EACAF,EADAE,iBAEJ,OACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAIH,EAAmB,EAAI,GAAII,GAAIJ,EAAmB,EAAI,EAAGK,UAAU,wBAA5F,SACI,qBAAKC,IAAG,UAAEP,EAAO,kBAAT,QAA2BQ,EAAgBC,IAAI,OAE3D,eAAC,IAAD,CAAKP,GAAI,GAAIC,GAAI,GAAIC,GAAIH,EAAmB,GAAK,GAAII,GAAIJ,EAAmB,GAAK,GAAIK,UAAU,kBAA/F,UACI,mBAAGI,KAAMV,EAAO,IAASW,OAAO,SAASL,UAAU,gBAAnD,SACKN,EAAO,QAEZ,qBAAKM,UAAU,sBAAf,SACKN,EAAO,qBAqFbY,EA9EM,SAACb,GAAW,IAAD,EACFc,mBAAS,IADP,mBACrBC,EADqB,KACdC,EADc,OAEQF,mBAAS,GAFjB,mBAErBG,EAFqB,KAETC,EAFS,OAGoBJ,oBAAS,GAH7B,mBAGrBZ,EAHqB,KAGHiB,EAHG,OCzBjB,SAA0BJ,EAAOE,GAAa,IAAD,EAC1BH,oBAAS,GADiB,mBACjDM,EADiD,KACxCC,EADwC,OAE9BP,oBAAS,GAFqB,mBAEjDQ,EAFiD,KAE1CC,EAF0C,OAGxBT,mBAAS,IAHe,mBAGjDU,EAHiD,KAGvCC,EAHuC,OAI1BX,oBAAS,GAJiB,mBAIjDY,EAJiD,KAIxCC,EAJwC,KAoCxD,OA9BAC,qBAAU,WACNH,EAAY,MACb,CAACV,IAEJa,qBAAU,WACN,IAAIC,EACJR,GAAW,GACXE,GAAS,GACT,IAAIO,EAAG,UCjBS,iDDiBT,0BAAgCb,EAAhC,qBClBU,GDqCjB,OAlBIF,IACAe,GAAG,aAAUf,IAEjBgB,IAAM,CACFC,OAAQ,MACRF,IAAKA,EACLG,YAAa,IAAIF,IAAMG,aAAY,SAAAC,GAAC,OAAIN,EAASM,OAClDC,MAAK,SAAAC,GACJZ,GAAY,SAAAa,GACR,OAAO,YAAI,IAAIC,IAAJ,sBAAYD,GAAZ,YAA6BD,EAAIG,KAAKhB,gBAErDG,EAAWV,EAAaoB,EAAIG,KAAKC,YACjCpB,GAAW,MACZqB,OAAM,SAAAC,GACLtB,GAAW,GACXE,GAAS,GACLQ,IAAMa,SAASD,MAEhB,kBAAMd,OACd,CAACd,EAAOE,IAEJ,CAAEG,UAASE,QAAOE,WAAUE,WDF/BmB,CAAiB9B,EAAOE,GAJxBO,EALwB,EAKxBA,SACAE,EANwB,EAMxBA,QACAN,EAPwB,EAOxBA,QAGE0B,GAVsB,EAQxBxB,MAEayB,oBACXC,EAAyBC,uBAAY,SAAAC,GACnC9B,IACA0B,EAASK,SAASL,EAASK,QAAQC,aACvCN,EAASK,QAAU,IAAIE,sBAAqB,SAAAC,GACpCA,EAAQ,GAAGC,gBAAkB7B,GAC7BR,GAAc,SAAAsC,GAAc,OAAIA,EAAiB,QAGrDN,GAAMJ,EAASK,QAAQM,QAAQP,MACpC,CAAC9B,EAASM,IAGb,OADAgC,QAAQC,IAAIzD,GAER,sBAAKK,UAAU,wBAAf,UACI,sBAAKA,UAAU,uBAAf,UACI,cAAC,IAAD,CACIqD,gBACI,kBAEJC,kBACI,oBAEJC,QAAS5D,EACT6D,SAAU,SAACD,GACP3C,EAAoB2C,MAG5B,cAAC,IAAME,OAAP,CAAcC,MAAOlD,EAAOgD,SAAU,SAACG,GACnClD,EAASkD,EAAMtD,OAAOqD,OACtB/C,EAAc,IACfiD,YAAU,EAACC,MAAO,CAAEC,MAAO,KAAOC,YAAY,oBAAoB/D,UAAU,oBAEnF,sBAAKA,UAAW,sBAAwBL,EAAmB,GAAK,eAAhE,UAEQsB,EAAS+C,KAAI,SAACtE,EAASuE,GACnB,OAAIhD,EAASiD,SAAWD,EAAQ,EAExB,qBAAKjE,UAAU,eAAemE,IAAK1B,EAAnC,SACI,cAAC,EAAD,CAAe9C,iBAAkBA,EAAkBD,QAASA,MAKhE,qBAAKM,UAAU,eAAf,SACI,cAAC,EAAD,CAAeL,iBAAkBA,EAAkBD,QAASA,SAO5EmB,EACI,qBAAKb,UAAU,UAAf,SACI,cAAC,IAAD,MAGJ,mCACyB,IAApBiB,EAASiD,QAAgB,sDGtFvCE,MARf,WACE,OACE,qBAAKpE,UAAU,MAAf,SACE,cAAC,EAAD,OCMSqE,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB1C,MAAK,YAAkD,IAA/C2C,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K","file":"static/js/main.a90d0820.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/vietname.1f00f178.jpg\";","import useArticlesQuery from \"./useArticlesQuery\";\nimport {useCallback, useRef, useState} from \"react\";\nimport {Spin, Input, Col, Row, Switch} from 'antd';\nimport \"./assets/css/ArticlesPage.css\";\nimport 'antd/dist/antd.css';\nimport VietnamPicture from \"./assets/images/vietname.jpg\";\n\nconst RenderArticle = (props) => {\n    const {\n        article,\n        isScrollVertical\n    } = props;\n    return (\n        <Row>\n            <Col xs={24} sm={24} md={isScrollVertical ? 8 : 24} lg={isScrollVertical ? 6 : 8} className=\"article_image_wrapper\">\n                <img src={article[\"urlToImage\"] ?? VietnamPicture} alt=\"\"/>\n            </Col>\n            <Col xs={24} sm={24} md={isScrollVertical ? 16 : 24} lg={isScrollVertical ? 18 : 24} className=\"article_content\">\n                <a href={article[\"url\"]} target=\"_blank\" className=\"article_title\">\n                    {article[\"title\"]}\n                </a>\n                <div className=\"article_description\">\n                    {article[\"description\"]}\n                </div>\n            </Col>\n        </Row>\n    )\n}\n\nconst ArticlesPage = (props) => {\n    const [query, setQuery] = useState('')\n    const [pageNumber, setPageNumber] = useState(1);\n    const [isScrollVertical, setIsScrollVertical] = useState(true);\n    const {\n        articles,\n        hasMore,\n        loading,\n        error\n    } = useArticlesQuery(query, pageNumber);\n    const observer = useRef();\n    const lastArticlesElementRef = useCallback(node => {\n        if (loading) return\n        if (observer.current) observer.current.disconnect()\n        observer.current = new IntersectionObserver(entries => {\n            if (entries[0].isIntersecting && hasMore) {\n                setPageNumber(prevPageNumber => prevPageNumber + 1)\n            }\n        })\n        if (node) observer.current.observe(node)\n    }, [loading, hasMore])\n\n    console.log(isScrollVertical)\n    return (\n        <div className=\"articles_page_wrapper\">\n            <div className=\"articles_page_search\">\n                <Switch\n                    checkedChildren={\n                        \"scroll vertical\"\n                    }\n                    unCheckedChildren={\n                        \"scroll horizontal\"\n                    }\n                    checked={isScrollVertical}\n                    onChange={(checked) => {\n                        setIsScrollVertical(checked)\n                    }}\n                />\n                <Input.Search value={query} onChange={(event) => {\n                    setQuery(event.target.value);\n                    setPageNumber(1);\n                }} allowClear style={{ width: 300 }} placeholder=\"Enter keyword ...\" className=\"search_input\"/>\n            </div>\n            <div className={\"articles_page_body\" + (isScrollVertical ? \"\" : \" horizontal\")}>\n                {\n                    articles.map((article, index) => {\n                        if (articles.length === index + 1) {\n                            return (\n                                <div className=\"article_item\" ref={lastArticlesElementRef}>\n                                    <RenderArticle isScrollVertical={isScrollVertical} article={article}/>\n                                </div>\n                            )\n                        } else {\n                            return (\n                                <div className=\"article_item\">\n                                    <RenderArticle isScrollVertical={isScrollVertical} article={article}/>\n                                </div>\n                            )\n                        }\n                    })\n                }\n                {\n                    loading ?\n                        <div className=\"loading\">\n                            <Spin />\n                        </div>\n                        :\n                        <>\n                            {articles.length === 0 && <div>\n                                No article\n                            </div>}\n                        </>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default ArticlesPage;","import {useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport {API_KEY, BASE_API, PAGE_SIZE} from \"./constants\";\n\nexport default function useArticlesQuery(query, pageNumber) {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [articles, setArticles] = useState([]);\n    const [hasMore, setHasMore] = useState(false);\n\n    useEffect(() => {\n        setArticles([]);\n    }, [query])\n\n    useEffect(() => {\n        let cancel\n        setLoading(true);\n        setError(false);\n        let url = `${BASE_API}/articles?page=${pageNumber}&pageSize=${PAGE_SIZE}`;\n        if (query) {\n            url += `&q=${query}`\n        }\n        axios({\n            method: 'GET',\n            url: url,\n            cancelToken: new axios.CancelToken(c => cancel = c)\n        }).then(res => {\n            setArticles(prevArticles => {\n                return [...new Set([...prevArticles, ...res.data.articles])]\n            })\n            setHasMore(pageNumber < res.data.maxPerPage)\n            setLoading(false)\n        }).catch(e => {\n            setLoading(false)\n            setError(true)\n            if (axios.isCancel(e)) return\n        })\n        return () => cancel()\n    }, [query, pageNumber])\n\n    return { loading, error, articles, hasMore }\n}","export const PAGE_SIZE = 5;\nexport const BASE_API = 'https://tran-dinh-thang-news-api.herokuapp.com';","import './App.css';\nimport ArticlesPage from \"./ArticlesPage\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ArticlesPage />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}